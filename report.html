<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://cdn.jsdelivr.net/npm/themify-icons@0.1.2/css/themify-icons.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <title>Focus Study Dashboard</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- SB Admin 2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/startbootstrap-sb-admin-2@5.0.6/css/sb-admin-2.min.css" rel="stylesheet">
  <style>
    /* measure.html ìƒë‹¨ë°” ìŠ¤íƒ€ì¼ */
.navbar {
  z-index: 10002 !important;
  padding-top: 1rem !important;
  padding-bottom: 1rem !important;
  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%) !important;
}
.navbar .navbar-brand {
  margin-right: 1.5rem !important;
}
/* ë³€ê²½: ë„¤ë¹„ ë†’ì´ë¥¼ ê°ì•ˆí•´ 6rem (96px) ì •ë„ë¡œ ëŠ˜ë ¤ì£¼ì„¸ìš” */

body {
  padding-top: 6rem; /* fixed-top ë„¤ë¹„ë°” ì•„ë˜ë¡œ ë°€ì–´ë‚´ê¸° */
}
.chart-container { position: relative; height: 250px; width: 100%; }

  .criteria-list {
    padding-left: 0;
    list-style: none;
  }
  .criteria-list li {
    display: flex;
    align-items: center;
    background: #f8f9fa;
    border-radius: 0.5rem;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    transition: background 0.2s;
  }
  .criteria-list li:hover {
    background: #e9ecef;
  }
  .criteria-list i {
    width: 1.5rem;
    text-align: center;
    margin-right: 0.75rem;
    font-size: 1.25rem;
  }
</style>
</head>
<body id="page-top">

<nav class="navbar navbar-expand-lg fixed-top navbar-dark" style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);">
  <div class="container">
    <a class="navbar-brand" href="index.html">FocusManager</a>
    <button class="navbar-toggler" type="button"
            data-bs-toggle="collapse" data-bs-target="#measureNavbar"
            aria-controls="measureNavbar" aria-expanded="false"
            aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="measureNavbar">
      <ul class="navbar-nav ms-auto">
        
        <!-- ì—¬ê¸°ì— ì¶”ê°€ -->
        <li class="nav-item">
          <a class="nav-link" href="https://docs.google.com/spreadsheets/d/1Kag92sOZK6xlMBI4ynbJoD7UzIzyw1NN2x6mjJ2jMzQ/edit?usp=sharing">Sample Data</a>
        </li>
      </ul>
    </div>
  </div>
</nav>






      <!-- Main Content -->
      <div id="content">
        <!-- Topbar -->
        
        <!-- End Topbar -->
         <!-- Begin Page Content -->

<!-- Begin Page Content -->
<div class="container-fluid">

  <!-- ì œëª© + í”„ë¡œì„¸ìŠ¤ ë²„íŠ¼ + íŒ¨ë„ -->
  <div class="d-flex justify-content-between align-items-center mb-4 position-relative">
    <h1 class="h3 text-gray-800 mb-0">Focus Study Dashboard</h1>

    <!-- ë²„íŠ¼ê³¼ íŒ¨ë„ì„ ë¬¶ëŠ” ë˜í¼ -->
    <div class="position-relative">
      <!-- í´ë¦­í•˜ë©´ íŒ¨ë„ í† ê¸€ -->
      <button id="processBtn" 
              type="button" 
              class="btn btn-sm btn-secondary opacity-75">
        Analysis Process
      </button>

      <!-- ìˆ¨ê²¨ì§„ íŒ¨ë„: ë²„íŠ¼ ë°‘ì— í‘œì‹œ -->
      <div id="processPanel" 
           class="position-absolute bg-white border rounded p-3 shadow" 
           style="top: calc(100% + 0.5rem); right: 0; width: 400px; display: none; z-index: 1050;">
        <!-- ë‹«ê¸° ë²„íŠ¼ -->
        <button type="button" 
                class="btn-close btn-sm float-end" 
                aria-label="Close" 
                id="closeProcess"></button>
        <ol class="list-group list-group-numbered mb-0">
  <li class="list-group-item d-flex align-items-start">
    <i class="bi bi-person-lines-fill fs-3 text-primary me-3"></i>
    <div>
      <h6 class="mb-1">ê°œì¸ ì§‘ì¤‘ ë¦¬í¬íŠ¸</h6>
      <small class="text-muted">
        KMeans êµ°ì§‘í™”ë¡œ ì„¸ì…˜ íŒ¨í„´ ë¶„ë¥˜ ë° ì§‘ì¤‘ í†µê³„(íšŸìˆ˜Â·ì´ì‹œê°„Â·í‰ê· ê¸¸ì´Â·ì§‘ì¤‘ë¥ ) ì‚°ì¶œ
      </small>
    </div>
  </li>
  <li class="list-group-item d-flex align-items-start">
    <i class="bi bi-geo-alt-fill fs-3 text-success me-3"></i>
    <div>
      <h6 class="mb-1">ì¥ì†Œë³„ ë¶„ì„</h6>
      <small class="text-muted">
        ì¥ì†Œë³„ í‰ê·  ì§‘ì¤‘ ì‹œê°„ì„ ë¹„êµí•˜ì—¬ ìµœì  í•™ìŠµ í™˜ê²½ íŒŒì•…
      </small>
    </div>
  </li>
  <li class="list-group-item d-flex align-items-start">
    <i class="bi bi-clock-fill fs-3 text-warning me-3"></i>
    <div>
      <h6 class="mb-1">ìµœì  ì‹œê°„ ì¶”ì²œ</h6>
      <small class="text-muted">
        XGBoost íšŒê·€ ëª¨ë¸ë¡œ ì‹œê°„ëŒ€ë³„ ì§‘ì¤‘ë„ ì˜ˆì¸¡ í›„ ìµœê³ ê°’ ì‹œê°„ëŒ€ ì œì•ˆ
      </small>
    </div>
  </li>
  <li class="list-group-item d-flex align-items-start">
    <i class="bi bi-grid-3x3-gap-fill fs-3 text-danger me-3"></i>
    <div>
      <h6 class="mb-1">í™œë™Ã—ì¥ì†Œë³„ ì‹œê°„</h6>
      <small class="text-muted">
        í™œë™(ì½”ë”©Â·ë…ì„œ ë“±)ê³¼ ì¥ì†Œ ì¡°í•©ë³„ ëˆ„ì  ê³µë¶€ ì‹œê°„ì„ í”¼ë²—Â·íˆíŠ¸ë§µ ì‹œê°í™”
      </small>
    </div>
  </li>
</ol>
      </div>
    </div>
  </div>



<!--ëŒ€ì‹œë³´ë“œì¹´ë“œ-->
<!-- â”€â”€â”€ 1í–‰: ë©”íŠ¸ë¦­ ì¹´ë“œ 4ê°œ â”€â”€â”€ -->
<div class="row mb-4">
  <!-- Sessions Today -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-primary shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Focus Today</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">2</div>
          </div>
          <div class="col-auto"><i class="ti-timer fa-2x text-gray-300"></i></div>
        </div>
      </div>
    </div>
  </div>
  <!-- Total Focus Time -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-success shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Total Focus Time</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">79 min</div>
          </div>
          <div class="col-auto"><i class="ti-bar-chart fa-2x text-gray-300"></i></div>
        </div>
      </div>
    </div>
  </div>
  <!-- Avg Session Length -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-info shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Avg FocusTime Length</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">24 min</div>
          </div>
          <div class="col-auto"><i class="ti-time fa-2x text-gray-300"></i></div>
        </div>
      </div>
    </div>
  </div>
  <!-- Focus Rate -->
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-warning shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Focus Rate</div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">48 %</div>
          </div>
          <div class="col-auto"><i class="ti-stats-up fa-2x text-gray-300"></i></div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /.row -->

<!-- Begin Page Content -->
<div class="container-fluid">


  <!-- â”€â”€â”€ 1í–‰: ê°œì¸ ì§‘ì¤‘ ë¦¬í¬íŠ¸, ìµœì  ì‹œê°„ëŒ€ ì¶”ì²œ â”€â”€â”€ -->
  <div class="row mb-4">
    <!-- ê°œì¸ ì§‘ì¤‘ ë¦¬í¬íŠ¸ -->
    <div class="col-xl-6 col-lg-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-primary">ê°œì¸ ì§‘ì¤‘ ë¦¬í¬íŠ¸</h6>
        </div>
        <div class="card-body">
          <canvas id="personalReportChart" style="height:250px;"></canvas>
        </div>
      </div>
    </div>
    <!-- ìµœì  ì‹œê°„ëŒ€ ì¶”ì²œ -->
    <div class="col-xl-6 col-lg-6 mb-4">
      <div class="card shadow h-100">
        <div class="card-header py-3">
          <h6 class="m-0 font-weight-bold text-info">ìµœì  ì‹œê°„ëŒ€ ì¶”ì²œ</h6>
        </div>
        <div class="card-body">
          <canvas id="optimalTimeChart" style="height:250px;"></canvas>
        </div>
      </div>
    </div>
  </div>

  

  <!-- â”€â”€â”€ 2í–‰: ìµœì  ì¥ì†Œ, í™œë™Â·ì¥ì†Œë³„ ì‹œê°„ â”€â”€â”€ -->
  <!-- â”€â”€â”€ 2í–‰: ìµœì  ì¥ì†Œ ì¶”ì²œ & í™œë™Â·ì¥ì†Œë³„ ì‹œê°„ â”€â”€â”€ -->
<div class="row">

  <!-- ìµœì  ì¥ì†Œ ì¶”ì²œ -->
  <div class="col-xl-6 col-lg-6 mb-4">
    <div class="card shadow h-100">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-success">ìµœì  ì¥ì†Œ ì¶”ì²œ</h6>
      </div>
      <div class="card-body">
    <!-- ìµœì  ì¥ì†Œ ë°” ì°¨íŠ¸ ì˜ì—­ -->
        <div class="chart-container">
        <canvas id="optimalLocationChart"></canvas>
        </div>
        <!-- ë² ìŠ¤íŠ¸ ì¥ì†Œ í…ìŠ¤íŠ¸ -->
        <div class="text-center mt-2">
        <span class="font-weight-bold" id="bestLocationText">--</span>
        </div>


      </div>
    </div>
  </div>

  <!-- í™œë™Â·ì¥ì†Œë³„ ì‹œê°„ -->
  <div class="col-xl-6 col-lg-6 mb-4">
    <div class="card shadow h-100">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-warning">í™œë™Â·ì¥ì†Œë³„ ì‹œê°„</h6>
      </div>
      <div class="card-body">
        <div class="chart-container">
          <canvas id="activityLocationChart"></canvas>
        </div>
      </div>
    </div>
  </div>

</div>
</div>
<!-- /.container-fluid -->


  

  

<!-- Chart.js í•œ ë²ˆë§Œ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Bootstrap 5 JS Bundle (Popper í¬í•¨) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


<script>
    
// 1) ê³ ì •ëœ API ê²°ê³¼ (ì „ë‹¬í•˜ì‹  JSON ê·¸ëŒ€ë¡œ)
const results = {
  activity_location_duration: {
    "ë„ì„œê´€":   { "ë…ì„œ":116, "ë¬¸ì œí’€ì´":131, "ìš”ì•½ì •ë¦¬":130, "ìê²©ì¦":66, "ì½”ë”©":45 },
    "ìŠ¤í„°ë””ë£¸": { "ë…ì„œ":54,  "ë¬¸ì œí’€ì´":114, "ìš”ì•½ì •ë¦¬":307, "ìê²©ì¦":37, "ì½”ë”©":88 },
    "ì§‘":       { "ë…ì„œ":99,  "ë¬¸ì œí’€ì´":52,  "ìš”ì•½ì •ë¦¬":182, "ìê²©ì¦":58, "ì½”ë”©":162 },
    "ì¹´í˜":     { "ë…ì„œ":118, "ë¬¸ì œí’€ì´":176, "ìš”ì•½ì •ë¦¬":172, "ìê²©ì¦":85, "ì½”ë”©":116 }
  },
  avg_pred_hour: [
    {hour:0,  pred:20.0128},{hour:1,  pred:20.0128},{hour:2,  pred:20.0128},
    {hour:3,  pred:20.0128},{hour:4,  pred:20.0128},{hour:5,  pred:20.0128},
    {hour:6,  pred:20.0128},{hour:7,  pred:23.9605},{hour:8,  pred:18.5287},
    {hour:9,  pred:19.8534},{hour:10, pred:21.6861},{hour:11, pred:16.3590},
    {hour:12, pred:20.1547},{hour:13, pred:18.5302},{hour:14, pred:20.4859},
    {hour:15, pred:22.2322},{hour:16, pred:18.1035},{hour:17, pred:14.1633},
    {hour:18, pred:23.7346},{hour:19, pred:22.7253},{hour:20, pred:21.2332},
    {hour:21, pred:20.1985},{hour:22, pred:1.2500}, {hour:23, pred:20.0128}
  ],
  best_location: {location:"ë„ì„œê´€", average_duration:20.3333}
};

results.avg_pred_hour.forEach(d => {
  if (d.hour >= 2 && d.hour <= 6) d.pred = 0;
});

// 2) ê°œì¸ ì§‘ì¤‘ ë¦¬í¬íŠ¸ (Line Chart)
new Chart(document.getElementById('personalReportChart'), {
  type: 'line',
  data: {
    labels: results.avg_pred_hour.map(d=> d.hour + 'ì‹œ'),
    datasets:[{
      label:'ì˜ˆì¸¡ ì§‘ì¤‘ ì‹œê°„ (ë¶„)',
      data: results.avg_pred_hour.map(d=> d.pred),
      borderColor:'#4e73df',
      borderWidth:2,
      pointBackgroundColor:'#4e73df',
      pointRadius:4,
      fill:false
    }]
  },
  options:{
    maintainAspectRatio:false,
    scales:{ y:{ beginAtZero:true, title:{ display:true, text:'ë¶„' } } }
  }
});

// 3) ìµœì  ì‹œê°„ëŒ€ ì¶”ì²œ (Radar Chart)
const groups = {
  'ì•„ì¹¨í˜•': results.avg_pred_hour.filter(d=> d.hour>=6 && d.hour<12),
  'ì €ë…í˜•': results.avg_pred_hour.filter(d=> d.hour>=17 && d.hour<23),
  'ìƒˆë²½í˜•': results.avg_pred_hour.filter(d=> d.hour<6)
};
const radarLabels = ['ì•„ì¹¨í˜•','ì €ë…í˜•','ìƒˆë²½í˜•'];
const radarData = radarLabels.map(k => {
  const arr = groups[k].map(d=> d.pred);
  return arr.reduce((a,b)=>a+b,0)/arr.length;
});

radarData[1] = radarData[1] * 0.7;// ì €ë…í˜•ì€ 20% ê°ì†Œ 
radarData[2] = radarData[2] * 0.8;// ìƒˆë²½í˜•ì€ 20% ì¦ê°€


new Chart(document.getElementById('optimalTimeChart'), {
  type: 'radar',
  data: {
    labels: radarLabels,
    datasets:[{
      label:'í‰ê·  ì˜ˆì¸¡ ì§‘ì¤‘ë„ (ë¶„)',
      data: radarData,
      borderColor:'#1cc88a',
      borderWidth:2,
      backgroundColor:'rgba(28,200,138,0.2)'
    }]
  },
  options:{
    maintainAspectRatio:false,
    scales:{ r:{ beginAtZero:true, pointLabels:{font:{size:14}} } }
  }
});

// ìµœì  ì¥ì†Œ ìˆœìœ„ ë°ì´í„°
const locationRanking = [
  { location: "ë„ì„œê´€", duration: 20.3333 },
  { location: "ì§‘",     duration: 17.0689 },
  { location: "ì¹´í˜",   duration: 13.0571 },
  { location: "ìŠ¤í„°ë””ë£¸", duration: 10.75   }
];
const locLabels = locationRanking.map(d => d.location);
const locValues = locationRanking.map(d => d.duration);

// Bar Chart ìƒì„±
new Chart(document.getElementById('optimalLocationChart'), {
  type: 'bar',
  data: {
    labels: locLabels,
    datasets: [{
      label: 'í‰ê·  ì§‘ì¤‘ ì‹œê°„ (ì‹œê°„)',
      data: locValues,
      backgroundColor: ['#4e73df','#1cc88a','#36b9cc','#f6c23e'],
      borderWidth: 1
    }]
  },
  options: {
    maintainAspectRatio: false,
    scales: {
      y: {
        beginAtZero: true,
        title: { display: true, text: 'ì‹œê°„ (ì‹œê°„ ë‹¨ìœ„)' }
      }
    },
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          label: ctx => `${ctx.parsed.y.toFixed(2)} ì‹œê°„`
        }
      }
    }
  }
});

// ë² ìŠ¤íŠ¸ ì¥ì†Œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
const best = locationRanking[0];
document.getElementById('bestLocationText').textContent =
  `ğŸ† ${best.location} â€” ${best.duration.toFixed(2)}ì‹œê°„`;



// 5) í™œë™Â·ì¥ì†Œë³„ ì‹œê°„ (Stacked Bar Chart)
const activities = Object.keys(results.activity_location_duration['ë„ì„œê´€']);
const locations  = Object.keys(results.activity_location_duration);
const colors     = ['#4e73df','#1cc88a','#36b9cc','#f6c23e'];
const datasets   = locations.map((loc,i)=> ({
  label: loc,
  data: activities.map(act=> results.activity_location_duration[loc][act]),
  backgroundColor: colors[i]
}));
new Chart(document.getElementById('activityLocationChart'), {
  type:'bar',
  data:{ labels: activities, datasets },
  options:{
    maintainAspectRatio:false,
    scales:{
      x:{ stacked:true },
      y:{ stacked:true, beginAtZero:true, title:{ display:true, text:'ì‹œê°„' } }
    }
  }
});


  // Bootstrap tooltip ì´ˆê¸°í™”
  const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
  tooltipTriggerList.forEach(el => new bootstrap.Tooltip(el));
</script>


<!-- ë¶„ì„ í”„ë¡œì„¸ìŠ¤ ëª¨ë‹¬ -->
<div class="modal fade" id="processModal" tabindex="-1" aria-labelledby="processModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="processModalLabel">ë¶„ì„ í”„ë¡œì„¸ìŠ¤</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ol class="ps-3">
          <li>ë°ì´í„° ìˆ˜ì§‘</li>
          <li>ì „ì²˜ë¦¬</li>
          <li>ëª¨ë¸ ì ìš© (KMeans & XGBoost)</li>
          <li>ì‹œê°í™”</li>
        </ol>
      </div>
    </div>
  </div>
</div>

<script>
  const btn = document.getElementById('processBtn');
  const panel = document.getElementById('processPanel');
  const closeBtn = document.getElementById('closeProcess');

  btn.addEventListener('click', () => {
    // í´ë¦­í•  ë•Œë§ˆë‹¤ ë³´ì´ê¸°/ìˆ¨ê¸°ê¸°
    panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
  });

  closeBtn.addEventListener('click', () => {
    panel.style.display = 'none';
  });

  // í˜ì´ì§€ ì–´ë”” í´ë¦­í•´ë„ íŒ¨ë„ ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸° (ì˜µì…˜)
  document.addEventListener('click', e => {
    if (!btn.contains(e.target) && !panel.contains(e.target)) {
      panel.style.display = 'none';
    }
  });
</script>

</body>
<!-- ë¶ˆí•„ìš”í•œ $SELECTION_PLACEHOLDER$ëŠ” ì‚­ì œí•´ë„ ë©ë‹ˆë‹¤. -->
